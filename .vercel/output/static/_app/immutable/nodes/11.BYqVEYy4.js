import{S as fe,i as he,s as pe,n as Q,d as v,b as q,c as i,F as z,w as a,e as u,f as w,D as M,h as T,q as oe,j as f,k as D,r as me,H as ue,a as W,I as J,L as ve,M as _e,g as Y,t as $,N as be,G as ge}from"../chunks/BVH3f4ly.js";import{e as ae}from"../chunks/CtnloIfX.js";import"../chunks/IHki7fMi.js";import{s as K}from"../chunks/DtlnWW8f.js";function ie(d,e,t){const l=d.slice();return l[17]=e[t],l}function xe(d){let e,t=ae(d[0]),l=[];for(let r=0;r<t.length;r+=1)l[r]=de(ie(d,t,r));return{c(){e=f("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=u(r,"DIV",{class:!0});var o=w(e);for(let s=0;s<l.length;s+=1)l[s].l(o);o.forEach(v),this.h()},h(){a(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5")},m(r,o){q(r,e,o);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(r,o){if(o&577){t=ae(r[0]);let s;for(s=0;s<t.length;s+=1){const c=ie(r,t,s);l[s]?l[s].p(c,o):(l[s]=de(c),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(r){r&&v(e),ge(l,r)}}}function ye(d){let e,t,l="ยังไม่มีโซนในระบบ",r,o,s="เพิ่มโซนแรก",c,h;return{c(){e=f("div"),t=f("p"),t.textContent=l,r=D(),o=f("button"),o.textContent=s,this.h()},l(k){e=u(k,"DIV",{class:!0});var m=w(e);t=u(m,"P",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-16b6mat"&&(t.textContent=l),r=T(m),o=u(m,"BUTTON",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-5zlisp"&&(o.textContent=s),m.forEach(v),this.h()},h(){a(t,"class","mb-4"),a(o,"class","bg-gold-500 hover:bg-gold-600 text-white font-medium px-6 py-2 rounded-lg transition-colors shadow-md"),a(e,"class","text-center py-12 text-gray-600")},m(k,m){q(k,e,m),i(e,t),i(e,r),i(e,o),c||(h=z(o,"click",d[5]),c=!0)},p:Q,d(k){k&&v(e),c=!1,h()}}}function ke(d){let e,t="กำลังโหลดข้อมูล...";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-11utlbz"&&(e.textContent=t),this.h()},h(){a(e,"class","text-center py-12 text-gray-600")},m(l,r){q(l,e,r)},p:Q,d(l){l&&v(e)}}}function de(d){let e,t,l=d[17].name+"",r,o,s,c=(d[17].description||"ไม่มีคำอธิบาย")+"",h,k,m,p,E="แก้ไข",C,_,b="ลบ",n,g,N;function B(){return d[11](d[17])}function x(){return d[12](d[17])}return{c(){e=f("div"),t=f("div"),r=$(l),o=D(),s=f("div"),h=$(c),k=D(),m=f("div"),p=f("button"),p.textContent=E,C=D(),_=f("button"),_.textContent=b,n=D(),this.h()},l(I){e=u(I,"DIV",{class:!0});var y=w(e);t=u(y,"DIV",{class:!0});var L=w(t);r=Y(L,l),L.forEach(v),o=T(y),s=u(y,"DIV",{class:!0});var O=w(s);h=Y(O,c),O.forEach(v),k=T(y),m=u(y,"DIV",{class:!0});var V=w(m);p=u(V,"BUTTON",{class:!0,"data-svelte-h":!0}),M(p)!=="svelte-1xzn76m"&&(p.textContent=E),C=T(V),_=u(V,"BUTTON",{class:!0,"data-svelte-h":!0}),M(_)!=="svelte-1buwkfu"&&(_.textContent=b),V.forEach(v),n=T(y),y.forEach(v),this.h()},h(){a(t,"class","text-xl font-semibold text-primary-800 mb-2"),a(s,"class","text-gray-600 mb-4 leading-relaxed"),a(p,"class","bg-warning text-black px-3 py-1 rounded text-sm font-medium hover:bg-yellow-500 transition-colors"),a(_,"class","bg-danger text-white px-3 py-1 rounded text-sm font-medium hover:bg-red-600 transition-colors"),a(m,"class","flex gap-2"),a(e,"class","bg-white border-2 border-gray-200 rounded-xl p-5 transition-all hover:border-gold-400 hover:-translate-y-1 hover:shadow-lg")},m(I,y){q(I,e,y),i(e,t),i(t,r),i(e,o),i(e,s),i(s,h),i(e,k),i(e,m),i(m,p),i(m,C),i(m,_),i(e,n),g||(N=[z(p,"click",B),z(_,"click",x)],g=!0)},p(I,y){d=I,y&1&&l!==(l=d[17].name+"")&&W(r,l),y&1&&c!==(c=(d[17].description||"ไม่มีคำอธิบาย")+"")&&W(h,c)},d(I){I&&v(e),g=!1,ue(N)}}}function ce(d){let e,t,l,r,o=d[3]?"แก้ไขโซน":"เพิ่มโซนใหม่",s,c,h,k="×",m,p,E,C,_="ชื่อโซน",b,n,g,N,B,x="คำอธิบาย",I,y,L,O,V,le="ยกเลิก",ee,A,H=d[3]?"บันทึก":"เพิ่ม",P,te,se;return{c(){e=f("div"),t=f("div"),l=f("div"),r=f("h2"),s=$(o),c=D(),h=f("button"),h.textContent=k,m=D(),p=f("form"),E=f("div"),C=f("label"),C.textContent=_,b=D(),n=f("input"),g=D(),N=f("div"),B=f("label"),B.textContent=x,I=D(),y=f("textarea"),L=D(),O=f("div"),V=f("button"),V.textContent=le,ee=D(),A=f("button"),P=$(H),this.h()},l(U){e=u(U,"DIV",{class:!0,role:!0,"aria-modal":!0});var j=w(e);t=u(j,"DIV",{class:!0,role:!0});var F=w(t);l=u(F,"DIV",{class:!0});var R=w(l);r=u(R,"H2",{class:!0});var ne=w(r);s=Y(ne,o),ne.forEach(v),c=T(R),h=u(R,"BUTTON",{class:!0,"data-svelte-h":!0}),M(h)!=="svelte-1m80ifn"&&(h.textContent=k),R.forEach(v),m=T(F),p=u(F,"FORM",{});var Z=w(p);E=u(Z,"DIV",{class:!0});var S=w(E);C=u(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(C)!=="svelte-phxyop"&&(C.textContent=_),b=T(S),n=u(S,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),S.forEach(v),g=T(Z),N=u(Z,"DIV",{class:!0});var G=w(N);B=u(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(B)!=="svelte-14f4r4o"&&(B.textContent=x),I=T(G),y=u(G,"TEXTAREA",{id:!0,class:!0,placeholder:!0}),w(y).forEach(v),G.forEach(v),L=T(Z),O=u(Z,"DIV",{class:!0});var X=w(O);V=u(X,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),M(V)!=="svelte-vu3x8l"&&(V.textContent=le),ee=T(X),A=u(X,"BUTTON",{type:!0,class:!0});var re=w(A);P=Y(re,H),re.forEach(v),X.forEach(v),Z.forEach(v),F.forEach(v),j.forEach(v),this.h()},h(){a(r,"class","text-xl font-semibold text-gray-900"),a(h,"class","text-gray-500 hover:text-gray-700 text-2xl"),a(l,"class","flex justify-between items-center mb-6"),a(C,"for","name"),a(C,"class","block mb-2 font-medium text-gray-900"),a(n,"id","name"),a(n,"type","text"),a(n,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 font-kanit"),a(n,"placeholder","เช่น โซน A, โซนชั้นประถม"),n.required=!0,a(E,"class","mb-5"),a(B,"for","description"),a(B,"class","block mb-2 font-medium text-gray-900"),a(y,"id","description"),a(y,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 font-kanit h-20 resize-none"),a(y,"placeholder","คำอธิบายเกี่ยวกับโซนนี้"),a(N,"class","mb-6"),a(V,"type","button"),a(V,"class","bg-gray-500 text-white px-5 py-2 rounded-lg hover:bg-gray-600 transition-colors"),a(A,"type","submit"),a(A,"class","bg-gold-500 hover:bg-gold-600 text-white px-5 py-2 rounded-lg transition-colors shadow-md"),a(O,"class","flex gap-3 justify-end"),a(t,"class","bg-white p-8 rounded-xl w-full max-w-md mx-4"),a(t,"role","document"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"),a(e,"role","dialog"),a(e,"aria-modal","true")},m(U,j){q(U,e,j),i(e,t),i(t,l),i(l,r),i(r,s),i(l,c),i(l,h),i(t,m),i(t,p),i(p,E),i(E,C),i(E,b),i(E,n),J(n,d[4].name),i(p,g),i(p,N),i(N,B),i(N,I),i(N,y),J(y,d[4].description),i(p,L),i(p,O),i(O,V),i(O,ee),i(O,A),i(A,P),te||(se=[z(h,"click",d[7]),z(n,"input",d[13]),z(y,"input",d[14]),z(V,"click",d[7]),z(p,"submit",ve(d[8])),z(t,"click",_e(d[10])),z(e,"click",d[7]),z(e,"keydown",d[15])],te=!0)},p(U,j){j&8&&o!==(o=U[3]?"แก้ไขโซน":"เพิ่มโซนใหม่")&&W(s,o),j&16&&n.value!==U[4].name&&J(n,U[4].name),j&16&&J(y,U[4].description),j&8&&H!==(H=U[3]?"บันทึก":"เพิ่ม")&&W(P,H)},d(U){U&&v(e),te=!1,ue(se)}}}function Ce(d){let e,t,l="จัดการโซน",r,o,s="เพิ่มโซนใหม่",c,h,k,m,p;function E(n,g){return n[1]?ke:n[0].length===0?ye:xe}let C=E(d),_=C(d),b=d[2]&&ce(d);return{c(){e=f("div"),t=f("h1"),t.textContent=l,r=D(),o=f("button"),o.textContent=s,c=D(),_.c(),h=D(),b&&b.c(),k=oe(),this.h()},l(n){e=u(n,"DIV",{class:!0});var g=w(e);t=u(g,"H1",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1aymoyr"&&(t.textContent=l),r=T(g),o=u(g,"BUTTON",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-1mzg66r"&&(o.textContent=s),g.forEach(v),c=T(n),_.l(n),h=T(n),b&&b.l(n),k=oe(),this.h()},h(){a(t,"class","text-3xl font-semibold text-gray-900"),a(o,"class","bg-gold-500 hover:bg-gold-600 text-white font-medium px-6 py-2 rounded-lg transition-colors shadow-md"),a(e,"class","flex justify-between items-center mb-8")},m(n,g){q(n,e,g),i(e,t),i(e,r),i(e,o),q(n,c,g),_.m(n,g),q(n,h,g),b&&b.m(n,g),q(n,k,g),m||(p=z(o,"click",d[5]),m=!0)},p(n,[g]){C===(C=E(n))&&_?_.p(n,g):(_.d(1),_=C(n),_&&(_.c(),_.m(h.parentNode,h))),n[2]?b?b.p(n,g):(b=ce(n),b.c(),b.m(k.parentNode,k)):b&&(b.d(1),b=null)},i:Q,o:Q,d(n){n&&(v(e),v(c),v(h),v(k)),_.d(n),b&&b.d(n),m=!1,p()}}}function we(d,e,t){let l=[],r=!0,o=!1,s=null,c={name:"",description:""};me(async()=>{await h(),t(1,r=!1)});async function h(){const{data:x,error:I}=await K.from("zones").select("*").order("created_at",{ascending:!1});x&&t(0,l=x)}function k(){t(4,c={name:"",description:""}),t(3,s=null),t(2,o=!0)}function m(x){t(4,c={name:x.name,description:x.description||""}),t(3,s=x),t(2,o=!0)}function p(){t(2,o=!1),t(3,s=null)}async function E(){if(s){const{error:x}=await K.from("zones").update({name:c.name,description:c.description}).eq("id",s.id);x||(await h(),p())}else{const{error:x}=await K.from("zones").insert({name:c.name,description:c.description});x||(await h(),p())}}async function C(x){if(confirm("คุณแน่ใจหรือไม่ที่จะลบโซนนี้?")){const{error:I}=await K.from("zones").delete().eq("id",x);I||await h()}}function _(x){be.call(this,d,x)}const b=x=>m(x),n=x=>C(x.id);function g(){c.name=this.value,t(4,c)}function N(){c.description=this.value,t(4,c)}return[l,r,o,s,c,k,m,p,E,C,_,b,n,g,N,x=>x.key==="Escape"&&p()]}class Ve extends fe{constructor(e){super(),he(this,e,we,Ce,pe,{})}}export{Ve as component};
