import{S as ft,i as ht,s as pt,n as Q,d as _,b as j,c as a,F as O,w as c,e as f,f as w,D as U,h as T,q as ot,j as h,k as D,r as mt,H as ut,a as W,I as J,L as vt,M as _t,g as Y,t as $,N as bt,G as gt}from"../chunks/BVH3f4ly.js";import{e as at}from"../chunks/CtnloIfX.js";import"../chunks/IHki7fMi.js";import{s as K}from"../chunks/DtlnWW8f.js";function it(i,t,e){const l=i.slice();return l[16]=t[e],l}function xt(i){let t,e=at(i[0]),l=[];for(let r=0;r<e.length;r+=1)l[r]=ct(it(i,e,r));return{c(){t=h("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){t=f(r,"DIV",{class:!0});var o=w(t);for(let s=0;s<l.length;s+=1)l[s].l(o);o.forEach(_),this.h()},h(){c(t,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5")},m(r,o){j(r,t,o);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null)},p(r,o){if(o&577){e=at(r[0]);let s;for(s=0;s<e.length;s+=1){const d=it(r,e,s);l[s]?l[s].p(d,o):(l[s]=ct(d),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=e.length}},d(r){r&&_(t),gt(l,r)}}}function yt(i){let t,e,l="ยังไม่มีโซนในระบบ",r,o,s="เพิ่มโซนแรก",d,p;return{c(){t=h("div"),e=h("p"),e.textContent=l,r=D(),o=h("button"),o.textContent=s,this.h()},l(C){t=f(C,"DIV",{class:!0});var m=w(t);e=f(m,"P",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-16b6mat"&&(e.textContent=l),r=T(m),o=f(m,"BUTTON",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-5zlisp"&&(o.textContent=s),m.forEach(_),this.h()},h(){c(e,"class","mb-4"),c(o,"class","bg-gold-500 hover:bg-gold-600 text-white font-medium px-6 py-2 rounded-lg transition-colors shadow-md"),c(t,"class","text-center py-12 text-gray-600")},m(C,m){j(C,t,m),a(t,e),a(t,r),a(t,o),d||(p=O(o,"click",i[5]),d=!0)},p:Q,d(C){C&&_(t),d=!1,p()}}}function Ct(i){let t,e="กำลังโหลดข้อมูล...";return{c(){t=h("div"),t.textContent=e,this.h()},l(l){t=f(l,"DIV",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-11utlbz"&&(t.textContent=e),this.h()},h(){c(t,"class","text-center py-12 text-gray-600")},m(l,r){j(l,t,r)},p:Q,d(l){l&&_(t)}}}function ct(i){let t,e,l=i[16].name+"",r,o,s,d=(i[16].description||"ไม่มีคำอธิบาย")+"",p,C,m,v,E="แก้ไข",k,b,g="ลบ",n,x,V;function u(){return i[11](i[16])}function q(){return i[12](i[16])}return{c(){t=h("div"),e=h("div"),r=$(l),o=D(),s=h("div"),p=$(d),C=D(),m=h("div"),v=h("button"),v.textContent=E,k=D(),b=h("button"),b.textContent=g,n=D(),this.h()},l(N){t=f(N,"DIV",{class:!0});var y=w(t);e=f(y,"DIV",{class:!0});var L=w(e);r=Y(L,l),L.forEach(_),o=T(y),s=f(y,"DIV",{class:!0});var z=w(s);p=Y(z,d),z.forEach(_),C=T(y),m=f(y,"DIV",{class:!0});var I=w(m);v=f(I,"BUTTON",{class:!0,"data-svelte-h":!0}),U(v)!=="svelte-1xzn76m"&&(v.textContent=E),k=T(I),b=f(I,"BUTTON",{class:!0,"data-svelte-h":!0}),U(b)!=="svelte-1buwkfu"&&(b.textContent=g),I.forEach(_),n=T(y),y.forEach(_),this.h()},h(){c(e,"class","text-xl font-semibold text-primary-800 mb-2"),c(s,"class","text-gray-600 mb-4 leading-relaxed"),c(v,"class","bg-warning text-black px-3 py-1 rounded text-sm font-medium hover:bg-yellow-500 transition-colors"),c(b,"class","bg-danger text-white px-3 py-1 rounded text-sm font-medium hover:bg-red-600 transition-colors"),c(m,"class","flex gap-2"),c(t,"class","bg-white border-2 border-gray-200 rounded-xl p-5 transition-all hover:border-gold-400 hover:-translate-y-1 hover:shadow-lg")},m(N,y){j(N,t,y),a(t,e),a(e,r),a(t,o),a(t,s),a(s,p),a(t,C),a(t,m),a(m,v),a(m,k),a(m,b),a(t,n),x||(V=[O(v,"click",u),O(b,"click",q)],x=!0)},p(N,y){i=N,y&1&&l!==(l=i[16].name+"")&&W(r,l),y&1&&d!==(d=(i[16].description||"ไม่มีคำอธิบาย")+"")&&W(p,d)},d(N){N&&_(t),x=!1,ut(V)}}}function dt(i){let t,e,l,r,o=i[3]?"แก้ไขโซน":"เพิ่มโซนใหม่",s,d,p,C="×",m,v,E,k,b="ชื่อโซน",g,n,x,V,u,q="คำอธิบาย",N,y,L,z,I,lt="ยกเลิก",tt,A,H=i[3]?"บันทึก":"เพิ่ม",P,et,st;return{c(){t=h("div"),e=h("div"),l=h("div"),r=h("h2"),s=$(o),d=D(),p=h("button"),p.textContent=C,m=D(),v=h("form"),E=h("div"),k=h("label"),k.textContent=b,g=D(),n=h("input"),x=D(),V=h("div"),u=h("label"),u.textContent=q,N=D(),y=h("textarea"),L=D(),z=h("div"),I=h("button"),I.textContent=lt,tt=D(),A=h("button"),P=$(H),this.h()},l(B){t=f(B,"DIV",{class:!0});var M=w(t);e=f(M,"DIV",{class:!0});var F=w(e);l=f(F,"DIV",{class:!0});var R=w(l);r=f(R,"H2",{class:!0});var nt=w(r);s=Y(nt,o),nt.forEach(_),d=T(R),p=f(R,"BUTTON",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-1m80ifn"&&(p.textContent=C),R.forEach(_),m=T(F),v=f(F,"FORM",{});var Z=w(v);E=f(Z,"DIV",{class:!0});var S=w(E);k=f(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),U(k)!=="svelte-phxyop"&&(k.textContent=b),g=T(S),n=f(S,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),S.forEach(_),x=T(Z),V=f(Z,"DIV",{class:!0});var G=w(V);u=f(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),U(u)!=="svelte-14f4r4o"&&(u.textContent=q),N=T(G),y=f(G,"TEXTAREA",{id:!0,class:!0,placeholder:!0}),w(y).forEach(_),G.forEach(_),L=T(Z),z=f(Z,"DIV",{class:!0});var X=w(z);I=f(X,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),U(I)!=="svelte-vu3x8l"&&(I.textContent=lt),tt=T(X),A=f(X,"BUTTON",{type:!0,class:!0});var rt=w(A);P=Y(rt,H),rt.forEach(_),X.forEach(_),Z.forEach(_),F.forEach(_),M.forEach(_),this.h()},h(){c(r,"class","text-xl font-semibold text-gray-900"),c(p,"class","text-gray-500 hover:text-gray-700 text-2xl"),c(l,"class","flex justify-between items-center mb-6"),c(k,"for","name"),c(k,"class","block mb-2 font-medium text-gray-900"),c(n,"id","name"),c(n,"type","text"),c(n,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 font-kanit"),c(n,"placeholder","เช่น โซน A, โซนชั้นประถม"),n.required=!0,c(E,"class","mb-5"),c(u,"for","description"),c(u,"class","block mb-2 font-medium text-gray-900"),c(y,"id","description"),c(y,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 font-kanit h-20 resize-none"),c(y,"placeholder","คำอธิบายเกี่ยวกับโซนนี้"),c(V,"class","mb-6"),c(I,"type","button"),c(I,"class","bg-gray-500 text-white px-5 py-2 rounded-lg hover:bg-gray-600 transition-colors"),c(A,"type","submit"),c(A,"class","bg-gold-500 hover:bg-gold-600 text-white px-5 py-2 rounded-lg transition-colors shadow-md"),c(z,"class","flex gap-3 justify-end"),c(e,"class","bg-white p-8 rounded-xl w-full max-w-md mx-4"),c(t,"class","fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50")},m(B,M){j(B,t,M),a(t,e),a(e,l),a(l,r),a(r,s),a(l,d),a(l,p),a(e,m),a(e,v),a(v,E),a(E,k),a(E,g),a(E,n),J(n,i[4].name),a(v,x),a(v,V),a(V,u),a(V,N),a(V,y),J(y,i[4].description),a(v,L),a(v,z),a(z,I),a(z,tt),a(z,A),a(A,P),et||(st=[O(p,"click",i[7]),O(n,"input",i[13]),O(y,"input",i[14]),O(I,"click",i[7]),O(v,"submit",vt(i[8])),O(e,"click",_t(i[10])),O(t,"click",i[7])],et=!0)},p(B,M){M&8&&o!==(o=B[3]?"แก้ไขโซน":"เพิ่มโซนใหม่")&&W(s,o),M&16&&n.value!==B[4].name&&J(n,B[4].name),M&16&&J(y,B[4].description),M&8&&H!==(H=B[3]?"บันทึก":"เพิ่ม")&&W(P,H)},d(B){B&&_(t),et=!1,ut(st)}}}function kt(i){let t,e,l="จัดการโซน",r,o,s="เพิ่มโซนใหม่",d,p,C,m,v;function E(n,x){return n[1]?Ct:n[0].length===0?yt:xt}let k=E(i),b=k(i),g=i[2]&&dt(i);return{c(){t=h("div"),e=h("h1"),e.textContent=l,r=D(),o=h("button"),o.textContent=s,d=D(),b.c(),p=D(),g&&g.c(),C=ot(),this.h()},l(n){t=f(n,"DIV",{class:!0});var x=w(t);e=f(x,"H1",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1aymoyr"&&(e.textContent=l),r=T(x),o=f(x,"BUTTON",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-1mzg66r"&&(o.textContent=s),x.forEach(_),d=T(n),b.l(n),p=T(n),g&&g.l(n),C=ot(),this.h()},h(){c(e,"class","text-3xl font-semibold text-gray-900"),c(o,"class","bg-gold-500 hover:bg-gold-600 text-white font-medium px-6 py-2 rounded-lg transition-colors shadow-md"),c(t,"class","flex justify-between items-center mb-8")},m(n,x){j(n,t,x),a(t,e),a(t,r),a(t,o),j(n,d,x),b.m(n,x),j(n,p,x),g&&g.m(n,x),j(n,C,x),m||(v=O(o,"click",i[5]),m=!0)},p(n,[x]){k===(k=E(n))&&b?b.p(n,x):(b.d(1),b=k(n),b&&(b.c(),b.m(p.parentNode,p))),n[2]?g?g.p(n,x):(g=dt(n),g.c(),g.m(C.parentNode,C)):g&&(g.d(1),g=null)},i:Q,o:Q,d(n){n&&(_(t),_(d),_(p),_(C)),b.d(n),g&&g.d(n),m=!1,v()}}}function wt(i,t,e){let l=[],r=!0,o=!1,s=null,d={name:"",description:""};mt(async()=>{await p(),e(1,r=!1)});async function p(){const{data:u,error:q}=await K.from("zones").select("*").order("created_at",{ascending:!1});u&&e(0,l=u)}function C(){e(4,d={name:"",description:""}),e(3,s=null),e(2,o=!0)}function m(u){e(4,d={name:u.name,description:u.description||""}),e(3,s=u),e(2,o=!0)}function v(){e(2,o=!1),e(3,s=null)}async function E(){if(s){const{error:u}=await K.from("zones").update({name:d.name,description:d.description}).eq("id",s.id);u||(await p(),v())}else{const{error:u}=await K.from("zones").insert({name:d.name,description:d.description});u||(await p(),v())}}async function k(u){if(confirm("คุณแน่ใจหรือไม่ที่จะลบโซนนี้?")){const{error:q}=await K.from("zones").delete().eq("id",u);q||await p()}}function b(u){bt.call(this,i,u)}const g=u=>m(u),n=u=>k(u.id);function x(){d.name=this.value,e(4,d)}function V(){d.description=this.value,e(4,d)}return[l,r,o,s,d,C,m,v,E,k,b,g,n,x,V]}class Vt extends ft{constructor(t){super(),ht(this,t,wt,kt,pt,{})}}export{Vt as component};
