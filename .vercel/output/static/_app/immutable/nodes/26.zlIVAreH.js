import{S as Ne,i as Ae,s as Me,d as p,m as be,o as ge,p as Pe,b as q,c as r,w as n,e as c,f as y,D as z,h as E,j as d,k,r as Se,n as xe,u as Ue,v as He,x as Be,y as qe,G as Re,H as ze,I as Q,a as ne,F as le,L as Oe,g as se,t as re,U as Fe,E as Ge}from"../chunks/BVH3f4ly.js";import{e as Ie}from"../chunks/CtnloIfX.js";import"../chunks/IHki7fMi.js";import{s as he}from"../chunks/DtlnWW8f.js";import{g as me}from"../chunks/BP_01uF4.js";import{L as Xe}from"../chunks/CMJtAESs.js";function Le(l,t,e){const s=l.slice();return s[15]=t[e],s}function Je(l){let t,e,s,o,i="‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö",a,v,m,_='<span class="text-gray-400">üîç</span>',P,u,b,g,H,O,I,V,w="‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠",J,C,F,j,A,Z="‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤",W,T,L,x,S=l[3].content.length+"",Y,K,$,B,U,Ce="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",fe,R,ae,pe,we,ee=Ie(l[4]),D=[];for(let f=0;f<ee.length;f+=1)D[f]=De(Le(l,ee,f));let N=l[4].length===0&&Ve();function Ee(f,M){return f[2]?We:Qe}let oe=Ee(l),G=oe(l);return{c(){t=d("div"),e=d("form"),s=d("div"),o=d("label"),o.textContent=i,a=k(),v=d("div"),m=d("div"),m.innerHTML=_,P=k(),u=d("input"),b=k(),g=d("div");for(let f=0;f<D.length;f+=1)D[f].c();H=k(),N&&N.c(),O=k(),I=d("div"),V=d("label"),V.textContent=w,J=k(),C=d("input"),F=k(),j=d("div"),A=d("label"),A.textContent=Z,W=k(),T=d("textarea"),L=k(),x=d("div"),Y=re(S),K=re(" ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£"),$=k(),B=d("div"),U=d("button"),U.textContent=Ce,fe=k(),R=d("button"),G.c(),this.h()},l(f){t=c(f,"DIV",{class:!0});var M=y(t);e=c(M,"FORM",{class:!0});var h=y(e);s=c(h,"DIV",{class:!0});var X=y(s);o=c(X,"LABEL",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-4revf0"&&(o.textContent=i),a=E(X),v=c(X,"DIV",{class:!0});var ie=y(v);m=c(ie,"DIV",{class:!0,"data-svelte-h":!0}),z(m)!=="svelte-1m80bwv"&&(m.innerHTML=_),P=E(ie),u=c(ie,"INPUT",{type:!0,placeholder:!0,class:!0}),ie.forEach(p),b=E(X),g=c(X,"DIV",{class:!0});var ue=y(g);for(let ve=0;ve<D.length;ve+=1)D[ve].l(ue);H=E(ue),N&&N.l(ue),ue.forEach(p),X.forEach(p),O=E(h),I=c(h,"DIV",{class:!0});var ce=y(I);V=c(ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(V)!=="svelte-1dtb7cz"&&(V.textContent=w),J=E(ce),C=c(ce,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ce.forEach(p),F=E(h),j=c(h,"DIV",{class:!0});var te=y(j);A=c(te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(A)!=="svelte-811m2i"&&(A.textContent=Z),W=E(te),T=c(te,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),y(T).forEach(p),L=E(te),x=c(te,"DIV",{class:!0});var _e=y(x);Y=se(_e,S),K=se(_e," ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£"),_e.forEach(p),te.forEach(p),$=E(h),B=c(h,"DIV",{class:!0});var de=y(B);U=c(de,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(U)!=="svelte-d3c63p"&&(U.textContent=Ce),fe=E(de),R=c(de,"BUTTON",{type:!0,class:!0});var ke=y(R);G.l(ke),ke.forEach(p),de.forEach(p),h.forEach(p),M.forEach(p),this.h()},h(){n(o,"class","block text-sm font-semibold text-gray-700"),n(m,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),n(u,"type","text"),n(u,"placeholder","‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö..."),n(u,"class","w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all"),n(v,"class","relative"),n(g,"class","max-h-64 overflow-y-auto border border-gray-200 rounded-xl"),n(s,"class","space-y-3"),n(V,"for","subject"),n(V,"class","block text-sm font-semibold text-gray-700"),n(C,"id","subject"),n(C,"type","text"),n(C,"placeholder","‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°"),C.required=!0,n(C,"class","w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all"),n(I,"class","space-y-3"),n(A,"for","content"),n(A,"class","block text-sm font-semibold text-gray-700"),n(T,"id","content"),n(T,"placeholder","‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."),T.required=!0,n(T,"rows","8"),n(T,"class","w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all resize-none"),n(x,"class","text-sm text-gray-500"),n(j,"class","space-y-3"),n(U,"type","button"),n(U,"class","px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors"),n(R,"type","submit"),R.disabled=ae=l[2]||!l[3].recipient_id||!l[3].subject||!l[3].content,n(R,"class","px-8 py-3 bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 text-white rounded-xl font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"),n(B,"class","flex items-center justify-end gap-4 pt-6 border-t border-gray-100"),n(e,"class","p-8 space-y-6"),n(t,"class","bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden")},m(f,M){q(f,t,M),r(t,e),r(e,s),r(s,o),r(s,a),r(s,v),r(v,m),r(v,P),r(v,u),Q(u,l[0]),r(s,b),r(s,g);for(let h=0;h<D.length;h+=1)D[h]&&D[h].m(g,null);r(g,H),N&&N.m(g,null),r(e,O),r(e,I),r(I,V),r(I,J),r(I,C),Q(C,l[3].subject),r(e,F),r(e,j),r(j,A),r(j,W),r(j,T),Q(T,l[3].content),r(j,L),r(j,x),r(x,Y),r(x,K),r(e,$),r(e,B),r(B,U),r(B,fe),r(B,R),G.m(R,null),pe||(we=[le(u,"input",l[7]),le(C,"input",l[10]),le(T,"input",l[11]),le(U,"click",l[12]),le(e,"submit",Oe(l[5]))],pe=!0)},p(f,M){if(M&1&&u.value!==f[0]&&Q(u,f[0]),M&24){ee=Ie(f[4]);let h;for(h=0;h<ee.length;h+=1){const X=Le(f,ee,h);D[h]?D[h].p(X,M):(D[h]=De(X),D[h].c(),D[h].m(g,H))}for(;h<D.length;h+=1)D[h].d(1);D.length=ee.length}f[4].length===0?N||(N=Ve(),N.c(),N.m(g,null)):N&&(N.d(1),N=null),M&8&&C.value!==f[3].subject&&Q(C,f[3].subject),M&8&&Q(T,f[3].content),M&8&&S!==(S=f[3].content.length+"")&&ne(Y,S),oe!==(oe=Ee(f))&&(G.d(1),G=oe(f),G&&(G.c(),G.m(R,null))),M&12&&ae!==(ae=f[2]||!f[3].recipient_id||!f[3].subject||!f[3].content)&&(R.disabled=ae)},i:xe,o:xe,d(f){f&&p(t),Re(D,f),N&&N.d(),G.d(),pe=!1,ze(we)}}}function Ke(l){let t,e,s;return e=new Xe({props:{size:"lg",text:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•..."}}),{c(){t=d("div"),qe(e.$$.fragment),this.h()},l(o){t=c(o,"DIV",{class:!0});var i=y(t);Be(e.$$.fragment,i),i.forEach(p),this.h()},h(){n(t,"class","flex justify-center items-center py-12")},m(o,i){q(o,t,i),He(e,t,null),s=!0},p:xe,i(o){s||(ge(e.$$.fragment,o),s=!0)},o(o){be(e.$$.fragment,o),s=!1},d(o){o&&p(t),Ue(e)}}}function De(l){let t,e,s,o=!1,i,a,v,m=je(l[15].role)+"",_,P,u,b,g=l[15].full_name+"",H,O,I,V=l[15].email+"",w,J,C,F=ye(l[15].role)+"",j,A,Z,W,T;return Z=Fe(l[9][0]),{c(){t=d("label"),e=d("input"),i=k(),a=d("div"),v=d("div"),_=re(m),P=k(),u=d("div"),b=d("div"),H=re(g),O=k(),I=d("div"),w=re(V),J=k(),C=d("span"),j=re(F),this.h()},l(L){t=c(L,"LABEL",{class:!0});var x=y(t);e=c(x,"INPUT",{type:!0,class:!0}),i=E(x),a=c(x,"DIV",{class:!0});var S=y(a);v=c(S,"DIV",{class:!0});var Y=y(v);_=se(Y,m),Y.forEach(p),P=E(S),u=c(S,"DIV",{class:!0});var K=y(u);b=c(K,"DIV",{class:!0});var $=y(b);H=se($,g),$.forEach(p),O=E(K),I=c(K,"DIV",{class:!0});var B=y(I);w=se(B,V),B.forEach(p),K.forEach(p),J=E(S),C=c(S,"SPAN",{class:!0});var U=y(C);j=se(U,F),U.forEach(p),S.forEach(p),x.forEach(p),this.h()},h(){n(e,"type","radio"),e.__value=s=l[15].id,Q(e,e.__value),n(e,"class","w-4 h-4 text-rose-600 focus:ring-rose-500"),n(v,"class","w-10 h-10 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center text-lg"),n(b,"class","font-medium text-gray-900"),n(I,"class","text-sm text-gray-500"),n(u,"class","flex-1"),n(C,"class",A="px-2 py-1 text-xs font-medium rounded-full "+Te(l[15].role)),n(a,"class","flex items-center gap-3 flex-1"),n(t,"class","flex items-center gap-3 p-4 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"),Z.p(e)},m(L,x){q(L,t,x),r(t,e),e.checked=e.__value===l[3].recipient_id,r(t,i),r(t,a),r(a,v),r(v,_),r(a,P),r(a,u),r(u,b),r(b,H),r(u,O),r(u,I),r(I,w),r(a,J),r(a,C),r(C,j),W||(T=le(e,"change",l[8]),W=!0)},p(L,x){x&16&&s!==(s=L[15].id)&&(e.__value=s,Q(e,e.__value),o=!0),(o||x&24)&&(e.checked=e.__value===L[3].recipient_id),x&16&&m!==(m=je(L[15].role)+"")&&ne(_,m),x&16&&g!==(g=L[15].full_name+"")&&ne(H,g),x&16&&V!==(V=L[15].email+"")&&ne(w,V),x&16&&F!==(F=ye(L[15].role)+"")&&ne(j,F),x&16&&A!==(A="px-2 py-1 text-xs font-medium rounded-full "+Te(L[15].role))&&n(C,"class",A)},d(L){L&&p(t),Z.r(),W=!1,T()}}}function Ve(l){let t,e='<div class="text-4xl mb-2">üîç</div> <p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>';return{c(){t=d("div"),t.innerHTML=e,this.h()},l(s){t=c(s,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1r6r1z8"&&(t.innerHTML=e),this.h()},h(){n(t,"class","p-8 text-center text-gray-500")},m(s,o){q(s,t,o)},d(s){s&&p(t)}}}function Qe(l){let t,e="üì§",s,o,i="‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°";return{c(){t=d("span"),t.textContent=e,s=k(),o=d("span"),o.textContent=i},l(a){t=c(a,"SPAN",{"data-svelte-h":!0}),z(t)!=="svelte-1bfaydn"&&(t.textContent=e),s=E(a),o=c(a,"SPAN",{"data-svelte-h":!0}),z(o)!=="svelte-70bvf"&&(o.textContent=i)},m(a,v){q(a,t,v),q(a,s,v),q(a,o,v)},d(a){a&&(p(t),p(s),p(o))}}}function We(l){let t,e,s,o="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...";return{c(){t=d("div"),e=k(),s=d("span"),s.textContent=o,this.h()},l(i){t=c(i,"DIV",{class:!0}),y(t).forEach(p),e=E(i),s=c(i,"SPAN",{"data-svelte-h":!0}),z(s)!=="svelte-1spg0w2"&&(s.textContent=o),this.h()},h(){n(t,"class","w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin")},m(i,a){q(i,t,a),q(i,e,a),q(i,s,a)},d(i){i&&(p(t),p(e),p(s))}}}function Ye(l){let t,e,s='<div class="flex items-center gap-4"><div class="w-12 h-12 bg-gradient-to-br from-rose-500 to-rose-600 rounded-xl flex items-center justify-center text-white text-2xl">‚úçÔ∏è</div> <div><h1 class="text-3xl font-bold text-gray-800">‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà</h1> <p class="text-gray-600">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏∂‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p></div></div> <a href="/messages" class="flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors no-underline"><span>‚Üê</span> <span>‡∏Å‡∏•‡∏±‡∏ö</span></a>',o,i,a,v;const m=[Ke,Je],_=[];function P(u,b){return u[1]?0:1}return i=P(l),a=_[i]=m[i](l),{c(){t=d("div"),e=d("div"),e.innerHTML=s,o=k(),a.c(),this.h()},l(u){t=c(u,"DIV",{class:!0});var b=y(t);e=c(b,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-rq5xc6"&&(e.innerHTML=s),o=E(b),a.l(b),b.forEach(p),this.h()},h(){n(e,"class","flex items-center justify-between mb-8"),n(t,"class","max-w-4xl mx-auto")},m(u,b){q(u,t,b),r(t,e),r(t,o),_[i].m(t,null),v=!0},p(u,[b]){let g=i;i=P(u),i===g?_[i].p(u,b):(Ge(),be(_[g],1,1,()=>{_[g]=null}),Pe(),a=_[i],a?a.p(u,b):(a=_[i]=m[i](u),a.c()),ge(a,1),a.m(t,null))},i(u){v||(ge(a),v=!0)},o(u){be(a),v=!1},d(u){u&&p(t),_[i].d()}}}function ye(l){return{super_admin:"‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î",admin:"‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö",teacher:"‡∏Ñ‡∏£‡∏π",parent:"‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á",student:"‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"}[l]||l}function je(l){return{super_admin:"üëë",admin:"üîß",teacher:"üë©‚Äçüè´",parent:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶",student:"üë®‚Äçüéì"}[l]||"üë§"}function Te(l){return{super_admin:"bg-purple-100 text-purple-800",admin:"bg-blue-100 text-blue-800",teacher:"bg-green-100 text-green-800",parent:"bg-orange-100 text-orange-800",student:"bg-gray-100 text-gray-800"}[l]||"bg-gray-100 text-gray-800"}function Ze(l,t,e){let s,o=null,i=[],a=!0,v=!1,m="",_={recipient_id:"",subject:"",content:""};Se(async()=>{const{data:{session:w}}=await he.auth.getSession();if(!w){me("/login");return}o=w.user,await P(),e(1,a=!1)});async function P(){const{data:w,error:J}=await he.from("profiles").select("id, full_name, email, role").neq("id",o.id).order("full_name");w&&e(6,i=w)}async function u(){if(!_.recipient_id||!_.subject||!_.content){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");return}e(2,v=!0);const{error:w}=await he.from("messages").insert({sender_id:o.id,recipient_id:_.recipient_id,subject:_.subject,content:_.content,is_read:!1});w?(alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°"),e(2,v=!1)):me("/messages")}const b=[[]];function g(){m=this.value,e(0,m)}function H(){_.recipient_id=this.__value,e(3,_)}function O(){_.subject=this.value,e(3,_)}function I(){_.content=this.value,e(3,_)}const V=()=>me("/messages");return l.$$.update=()=>{l.$$.dirty&65&&e(4,s=i.filter(w=>w.full_name.toLowerCase().includes(m.toLowerCase())||w.email.toLowerCase().includes(m.toLowerCase())||ye(w.role).toLowerCase().includes(m.toLowerCase())))},[m,a,v,_,s,u,i,g,H,b,O,I,V]}class nt extends Ne{constructor(t){super(),Ae(this,t,Ze,Ye,Me,{})}}export{nt as component};
