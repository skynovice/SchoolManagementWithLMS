<script>
  import { goto } from '$app/navigation';
  import { signOut } from '$stores/auth.js';
  import { showSuccess, showError } from '$stores/notifications.js';
  
  export let user = null;

  const handleSignOut = async () => {
    const result = await signOut();
    if (result.success) {
      showSuccess('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
      goto('/');
    } else {
      showError(result.error);
    }
  };
</script>

<header class="bg-primary-800 shadow-lg px-5">
  <div class="max-w-6xl mx-auto flex justify-between items-center h-18">
    <a href="/" class="text-2xl font-bold text-white no-underline">
      üè´ School Management
    </a>
    
    <nav class="flex gap-5 items-center">
      {#if user}
        <a href="/dashboard" class="text-primary-100 font-medium px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors no-underline">
          ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
        </a>
        <a href="/lms" class="text-primary-100 font-medium px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors no-underline">
          üìö LMS
        </a>
        <a href="/messages" class="text-primary-100 font-medium px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors no-underline">
          ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        </a>
        <a href="/reports" class="text-primary-100 font-medium px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors no-underline">
          ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
        </a>
        <button 
          class="bg-gold-500 text-white px-4 py-2 rounded-lg hover:bg-gold-600 transition-colors text-sm font-medium shadow-md"
          on:click={handleSignOut}
        >
          ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
        </button>
      {:else}
        <a href="/lms" class="text-primary-100 font-medium px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors no-underline">
          üìö LMS
        </a>
        <a href="/login" class="text-primary-100 font-medium px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors no-underline">
          ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
        </a>
      {/if}
    </nav>
  </div>
</header>